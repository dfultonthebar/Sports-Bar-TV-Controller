# TV Discovery Workflow - UX Specification

## Document Overview

This specification defines the complete user experience for IP-based TV discovery, pairing, and matrix output association in sports bar environments. The workflow supports Samsung, LG, Sony, and other smart TVs with network control capabilities.

---

## 1. Discovery Configuration Screen

### 1.1 Initial State

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Discover Network TVs                                    [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Scan your network to find smart TVs with IP control        â”‚
â”‚ support (Samsung, LG, Sony, TCL, Vizio, etc.)             â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Scan Method â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â—‹ IP Range         (Recommended for first setup)     â”‚  â”‚
â”‚ â”‚ â—‹ CIDR Notation    (Advanced users)                  â”‚  â”‚
â”‚ â”‚ â—‹ Subnet Scan      (Scan entire subnet automatically)â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ [Continue]                                                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Dialog header with title "Discover Network TVs"
- Descriptive text explaining the feature
- Radio button group for scan method selection
- Primary "Continue" button (Radix Dialog component)

**User Actions:**
- Select scan method
- Click "Continue" to proceed to configuration

---

### 1.2 IP Range Configuration

**Wireframe Description (IP Range Selected):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Configure IP Range Scan                          [â†] [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ â”Œâ”€ IP Range â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Start IP:  [192.168.5.___]                          â”‚   â”‚
â”‚ â”‚            â””â”€ IPv4 format required                  â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ End IP:    [192.168.5.___]                          â”‚   â”‚
â”‚ â”‚            â””â”€ Must be in same subnet                â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Example range: 192.168.5.1 - 192.168.5.24          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Port Configuration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Scan ports: [âœ“] 8001 (Samsung)                      â”‚   â”‚
â”‚ â”‚            [âœ“] 3000 (LG WebOS)                      â”‚   â”‚
â”‚ â”‚            [âœ“] 20060 (Sony BRAVIA)                  â”‚   â”‚
â”‚ â”‚            [âœ“] 7345 (Vizio SmartCast)               â”‚   â”‚
â”‚ â”‚            [âœ“] 9080 (TCL Roku)                      â”‚   â”‚
â”‚ â”‚            [ ] Custom ports                          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Advanced Options â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Timeout per IP:  [2] seconds                        â”‚   â”‚
â”‚ â”‚                  â””â”€ 1-10 seconds (default: 2)       â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Concurrent scans: [5] IPs at once                   â”‚   â”‚
â”‚ â”‚                  â””â”€ 1-20 (default: 5)               â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [âœ“] Skip CEC brand detection (faster)               â”‚   â”‚
â”‚ â”‚ [âœ“] Test power control after detection              â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ Estimated scan time: ~10 seconds for 24 IPs               â”‚
â”‚                                                             â”‚
â”‚ [Cancel]                              [Start Discovery]    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Back button (returns to method selection)
- Two text input fields for start/end IP (validated for IPv4 format)
- Checkbox group for port selection (pre-checked with common ports)
- Slider for timeout (1-10 seconds, default 2)
- Slider for concurrent scans (1-20, default 5)
- Advanced options checkboxes
- Estimated time calculator (updates in real-time)
- Cancel and primary action buttons

**Validation Rules:**
- Start IP must be valid IPv4
- End IP must be valid IPv4
- End IP must be >= Start IP
- IPs must be in same /24 subnet (warn if different)
- At least one port must be selected

**Error Messages:**
- "Invalid IP address format. Use format: 192.168.1.100"
- "End IP must be greater than or equal to Start IP"
- "Warning: IPs are in different subnets. This may take longer."
- "Please select at least one port to scan"

---

### 1.3 CIDR Configuration

**Wireframe Description (CIDR Selected):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Configure CIDR Scan                              [â†] [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ â”Œâ”€ Network CIDR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ CIDR:  [192.168.5.0/24_______________]              â”‚   â”‚
â”‚ â”‚        â””â”€ Example: 192.168.5.0/24                   â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ â„¹ This will scan 254 IPs (192.168.5.1-254)         â”‚   â”‚
â”‚ â”‚ Estimated time: ~85 seconds                         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ [Same port/advanced options as IP Range above]             â”‚
â”‚                                                             â”‚
â”‚ [Cancel]                              [Start Discovery]    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Validation Rules:**
- Must be valid CIDR notation (e.g., 192.168.1.0/24)
- Subnet size must be /16 or smaller (prevent scanning entire internet)
- Display warning if scanning > 100 IPs

**Error Messages:**
- "Invalid CIDR notation. Use format: 192.168.1.0/24"
- "Subnet too large. Maximum /16 (65,536 IPs). Use IP Range for large scans."
- "Warning: This will scan 254 IPs and take approximately 85 seconds."

---

### 1.4 Subnet Auto-Scan

**Wireframe Description (Subnet Selected):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Automatic Subnet Scan                            [â†] [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ This server's IP address: 192.168.5.100                    â”‚
â”‚ Detected subnet: 192.168.5.0/24                            â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Scan Configuration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Will scan:   192.168.5.1 - 192.168.5.254           â”‚   â”‚
â”‚ â”‚ Total IPs:   254                                    â”‚   â”‚
â”‚ â”‚ Estimated:   ~85 seconds                            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ [Same port/advanced options as IP Range above]             â”‚
â”‚                                                             â”‚
â”‚ [Cancel]                              [Start Discovery]    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Auto-Detection:**
- Detects server's network interface IP
- Calculates /24 subnet automatically
- Pre-fills scan range
- User can still customize ports/timeouts

---

## 2. Discovery Process Screen

### 2.1 Active Scanning State

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Discovering TVs...                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Scanning IP range: 192.168.5.1 - 192.168.5.24             â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  50% (12/24)    â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                             â”‚
â”‚ Currently scanning: 192.168.5.12                           â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Detected Devices (3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [âœ“] Samsung QN65Q80T                                â”‚   â”‚
â”‚ â”‚     IP: 192.168.5.5 | Port: 8001                   â”‚   â”‚
â”‚ â”‚     Confidence: High | Status: âš  Needs Pairing      â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [âœ“] LG OLED55C1PUB                                  â”‚   â”‚
â”‚ â”‚     IP: 192.168.5.8 | Port: 3000                   â”‚   â”‚
â”‚ â”‚     Confidence: High | Status: âš  Needs Pairing      â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [âœ“] Sony XBR-55X900H                                â”‚   â”‚
â”‚ â”‚     IP: 192.168.5.11 | Port: 20060                 â”‚   â”‚
â”‚ â”‚     Confidence: Medium | Status: âœ“ Ready            â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [Unknown Device]                                     â”‚   â”‚
â”‚ â”‚     IP: 192.168.5.10 | Port: 8001                  â”‚   â”‚
â”‚ â”‚     Confidence: Low | Status: âš  Brand Unknown       â”‚   â”‚
â”‚ â”‚     [Override Brand â–¼]                               â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ Time elapsed: 00:08  |  Estimated remaining: 00:07         â”‚
â”‚                                                             â”‚
â”‚ [Cancel Scan]                                               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Real-Time Updates:**
- Progress bar updates as IPs are scanned
- Currently scanning IP updates in real-time
- Detected devices list grows dynamically
- Time counters update every second
- Each device shows status badge (color-coded)

**Status Badges:**
- Green checkmark: Ready to use
- Yellow warning: Needs pairing
- Red exclamation: Error/unsupported
- Gray question: Brand unknown

**Components:**
- Radix Progress component for scan progress
- Card components for each detected device
- Badge components for status indicators
- Real-time stats (Tailwind animated transitions)

---

### 2.2 Discovery Complete State

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Discovery Complete                                      [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ âœ“ Scan complete! Found 4 devices in 15 seconds            â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Summary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Total IPs scanned:     24                           â”‚    â”‚
â”‚ â”‚ TVs detected:          4                            â”‚    â”‚
â”‚ â”‚ Ready to use:          1                            â”‚    â”‚
â”‚ â”‚ Need pairing:          2                            â”‚    â”‚
â”‚ â”‚ Brand unknown:         1                            â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Detected TVs (4) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [Checkbox] Samsung QN65Q80T       [Edit] [Test]     â”‚   â”‚
â”‚ â”‚            192.168.5.5 | Needs Pairing              â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [Checkbox] LG OLED55C1PUB          [Edit] [Test]    â”‚   â”‚
â”‚ â”‚            192.168.5.8 | Needs Pairing              â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [Checkbox] Sony XBR-55X900H       [Edit] [Test]     â”‚   â”‚
â”‚ â”‚            192.168.5.11 | Ready                     â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [Checkbox] Unknown Device          [Edit] [Delete]  â”‚   â”‚
â”‚ â”‚            192.168.5.10 | Select brand â–¼            â”‚   â”‚
â”‚ â”‚            [ Samsung â–¼] [Override]                  â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ [Select All] [Select None]                                 â”‚
â”‚                                                             â”‚
â”‚ [< Back to Scan]  [Skip Pairing]  [Continue to Pairing]   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Interactive Elements:**
- Checkboxes to select which TVs to configure
- "Edit" button opens device details dialog
- "Test" button sends test power command
- "Delete" button removes false positives
- Brand override dropdown for unknown devices
- Select All/None for bulk operations

**Action Buttons:**
- "Back to Scan" - runs discovery again
- "Skip Pairing" - saves detected TVs without pairing (will need manual pairing later)
- "Continue to Pairing" - proceeds to pairing workflow for selected TVs

---

## 3. Pairing Workflow

### 3.1 Pairing Overview Screen

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TV Pairing Required                              [â†] [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ 2 TVs need pairing to enable remote control                â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Pairing Steps â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ 1. A PIN code will appear on each TV screen         â”‚   â”‚
â”‚ â”‚ 2. Enter the PIN code in this interface             â”‚   â”‚
â”‚ â”‚ 3. Authorization will be saved for future use       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ TVs to Pair â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [1/2] Samsung QN65Q80T                              â”‚   â”‚
â”‚ â”‚       IP: 192.168.5.5                               â”‚   â”‚
â”‚ â”‚       Status: Waiting to start                      â”‚   â”‚
â”‚ â”‚       [Start Pairing]                                â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [2/2] LG OLED55C1PUB                                â”‚   â”‚
â”‚ â”‚       IP: 192.168.5.8                               â”‚   â”‚
â”‚ â”‚       Status: Waiting                               â”‚   â”‚
â”‚ â”‚       [Start Pairing]                                â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ [Skip All]                            [Start First TV]     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**User Flow:**
- Shows list of TVs requiring pairing
- Sequential pairing (one TV at a time)
- Clear step-by-step instructions
- Option to skip if needed

---

### 3.2 Active Pairing - Samsung Example

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pairing Samsung TV (1/2)                         [â†] [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Samsung QN65Q80T | 192.168.5.5                             â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Step 1: Check TV Screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ ğŸ“º A pairing request has been sent to the TV        â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Look for a popup on the TV screen showing:          â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—            â”‚   â”‚
â”‚ â”‚    â•‘  Allow connection from:            â•‘            â”‚   â”‚
â”‚ â”‚    â•‘  Sports Bar Controller             â•‘            â”‚   â”‚
â”‚ â”‚    â•‘                                    â•‘            â”‚   â”‚
â”‚ â”‚    â•‘  PIN: 1234                         â•‘            â”‚   â”‚
â”‚ â”‚    â•‘                                    â•‘            â”‚   â”‚
â”‚ â”‚    â•‘  [Allow]  [Deny]                   â•‘            â”‚   â”‚
â”‚ â”‚    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•            â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Step 2: Enter PIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Enter the 4-digit PIN shown on the TV:              â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ PIN: [___] [___] [___] [___]                        â”‚   â”‚
â”‚ â”‚      â””â”€ Auto-focus moves to next field              â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â± Timeout in: 60 seconds                                   â”‚
â”‚                                                             â”‚
â”‚ [Cancel]  [Resend Request]              [Verify PIN]       â”‚
â”‚                                                             â”‚
â”‚ â„¹ Note: Make sure someone is physically at the TV to       â”‚
â”‚   press "Allow" on the pairing prompt.                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Interactive Elements:**
- 4 separate input fields for PIN digits (auto-advance on input)
- Countdown timer (60 seconds)
- "Resend Request" button if timeout occurs
- Clear visual representation of TV prompt
- Help text explaining physical access requirement

**Validation:**
- PIN must be 4 digits
- Auto-submit when 4th digit is entered
- Show loading state during verification

---

### 3.3 Active Pairing - LG Example

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pairing LG TV (2/2)                              [â†] [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ LG OLED55C1PUB | 192.168.5.8                               â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Step 1: Accept on TV Screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ ğŸ“º A pairing request has been sent to the TV        â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Look for a notification on the TV:                  â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—            â”‚   â”‚
â”‚ â”‚    â•‘  Connection Request                â•‘            â”‚   â”‚
â”‚ â”‚    â•‘                                    â•‘            â”‚   â”‚
â”‚ â”‚    â•‘  Sports Bar Controller             â•‘            â”‚   â”‚
â”‚ â”‚    â•‘  wants to connect                  â•‘            â”‚   â”‚
â”‚ â”‚    â•‘                                    â•‘            â”‚   â”‚
â”‚ â”‚    â•‘  [Accept]  [Reject]                â•‘            â”‚   â”‚
â”‚ â”‚    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•            â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Press [Accept] on the TV to complete pairing        â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Waiting for TV Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚    [Spinning indicator]                             â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚    Waiting for user to accept on TV...              â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â± Timeout in: 45 seconds                                   â”‚
â”‚                                                             â”‚
â”‚ [Cancel]  [Resend Request]                                 â”‚
â”‚                                                             â”‚
â”‚ â„¹ Note: LG TVs require physical confirmation using the     â”‚
â”‚   TV remote. Make sure someone is at the TV.               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**LG-Specific Differences:**
- No PIN entry required (accept/reject only)
- Different UI on TV screen
- Automatic pairing completion when accepted
- Polling for pairing status every 2 seconds

---

### 3.4 Pairing Success

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pairing Successful                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ âœ“ Samsung QN65Q80T paired successfully                     â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Connection Details â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ IP Address:      192.168.5.5                        â”‚   â”‚
â”‚ â”‚ Auth Token:      ey...k7 (saved securely)           â”‚   â”‚
â”‚ â”‚ Capabilities:    Power, Volume, Input, Apps         â”‚   â”‚
â”‚ â”‚ API Version:     2.0.25                             â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Test Connection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Test basic controls to verify pairing:              â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [Power On]  [Power Off]  [Volume Up]  [Volume Down] â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Last test result: âœ“ Power On successful             â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ [Continue to Next TV]                                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Shows saved connection details (masked token)
- Lists detected TV capabilities
- Built-in test controls
- Automatic progression to next TV

---

### 3.5 Pairing Timeout/Failure

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pairing Timeout                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ âœ— Failed to pair with Samsung QN65Q80T                     â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ What Happened â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ The TV did not respond within the 60-second timeout â”‚   â”‚
â”‚ â”‚ period. This usually means:                          â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ â€¢ The pairing prompt was not accepted on the TV     â”‚   â”‚
â”‚ â”‚ â€¢ The TV is not currently powered on                â”‚   â”‚
â”‚ â”‚ â€¢ Network connection issue                          â”‚   â”‚
â”‚ â”‚ â€¢ TV's remote control API is disabled               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Next Steps â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [Try Again]        Resend pairing request           â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [Skip This TV]     Continue without pairing         â”‚   â”‚
â”‚ â”‚                    (can pair later from settings)   â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ [Troubleshoot]     View troubleshooting guide       â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ [Cancel All]                          [Next TV]            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Error Recovery Options:**
- Retry immediately
- Skip and continue to next TV
- Open troubleshooting guide (context-specific)
- Cancel entire pairing workflow

---

### 3.6 All Pairing Complete

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pairing Complete                                        [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ âœ“ Successfully paired 2 out of 2 TVs                       â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Pairing Summary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ âœ“ Samsung QN65Q80T (192.168.5.5)                    â”‚   â”‚
â”‚ â”‚   Status: Ready | Token stored securely             â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ âœ“ LG OLED55C1PUB (192.168.5.8)                      â”‚   â”‚
â”‚ â”‚   Status: Ready | Token stored securely             â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ Next: Associate these TVs with HDMI matrix outputs         â”‚
â”‚                                                             â”‚
â”‚ [Save & Exit]                  [Continue to Assignment]    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Matrix Output Association

### 4.1 Assignment Overview

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Assign TVs to Matrix Outputs                     [â†] [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Match discovered TVs with HDMI matrix outputs              â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Assignment Method â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â—‹ Auto-assign by CEC name (Recommended)             â”‚   â”‚
â”‚ â”‚   â””â”€ Uses TV names from CEC discovery               â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ â—‹ Manual drag-and-drop                              â”‚   â”‚
â”‚ â”‚   â””â”€ Manually match each TV to an output            â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ â—‹ Skip for now                                      â”‚   â”‚
â”‚ â”‚   â””â”€ Configure later from Device Config page        â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ [Continue]                                                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.2 Auto-Assignment (CEC-Based)

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Auto-Assign by CEC Name                          [â†] [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Comparing CEC names with discovered TVs...                 â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Suggested Assignments â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Matrix Output 1: "Main Bar TV"                      â”‚   â”‚
â”‚ â”‚ CEC Name: SAMSUNG-QN65Q80T                          â”‚   â”‚
â”‚ â”‚ â†’ Matched: Samsung QN65Q80T (192.168.5.5)           â”‚   â”‚
â”‚ â”‚   Confidence: 95% [âœ“] Auto-assign                   â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Matrix Output 2: "Pool Table TV"                    â”‚   â”‚
â”‚ â”‚ CEC Name: [LG]OLED55C1                              â”‚   â”‚
â”‚ â”‚ â†’ Matched: LG OLED55C1PUB (192.168.5.8)             â”‚   â”‚
â”‚ â”‚   Confidence: 90% [âœ“] Auto-assign                   â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Matrix Output 3: "Booth TV"                         â”‚   â”‚
â”‚ â”‚ CEC Name: BRAVIA-55X900H                            â”‚   â”‚
â”‚ â”‚ â†’ Matched: Sony XBR-55X900H (192.168.5.11)          â”‚   â”‚
â”‚ â”‚   Confidence: 88% [âœ“] Auto-assign                   â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Matrix Output 4: "Back Bar TV"                      â”‚   â”‚
â”‚ â”‚ CEC Name: TCL-Roku-TV                               â”‚   â”‚
â”‚ â”‚ â†’ No match found                                    â”‚   â”‚
â”‚ â”‚   [Assign manually â–¼]                                â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â„¹ CEC names are detected from HDMI-CEC protocol.           â”‚
â”‚   Uncheck boxes to manually assign specific TVs.           â”‚
â”‚                                                             â”‚
â”‚ [Cancel]                              [Assign Selected]    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Smart Matching Algorithm:**
- Fuzzy string matching between CEC OSD names and detected TV models
- Confidence score based on:
  - Brand name match (Samsung, LG, Sony)
  - Model number substring match
  - IP address proximity (if CEC reports IP)
- User can override any suggestion

---

### 4.3 Manual Drag-and-Drop Assignment

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Manual TV Assignment                                           [â†] [X]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ Drag TVs from the left panel to matrix outputs on the right               â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€ Discovered TVs â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€ Matrix Outputs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚                          â”‚  â”‚                                           â”‚â”‚
â”‚ â”‚ ğŸ“º Samsung QN65Q80T      â”‚  â”‚ Output 1: Main Bar TV                    â”‚â”‚
â”‚ â”‚    192.168.5.5           â”‚  â”‚ [Drop zone - drag TV here]               â”‚â”‚
â”‚ â”‚    [Drag me â†’]           â”‚  â”‚ [Test Power]                             â”‚â”‚
â”‚ â”‚                          â”‚  â”‚                                           â”‚â”‚
â”‚ â”‚ ğŸ“º LG OLED55C1PUB        â”‚  â”‚ Output 2: Pool Table TV                  â”‚â”‚
â”‚ â”‚    192.168.5.8           â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚ â”‚    [Drag me â†’]           â”‚  â”‚ â”‚ ğŸ“º Sony XBR-55X900H                  â”‚ â”‚â”‚
â”‚ â”‚                          â”‚  â”‚ â”‚    192.168.5.11                      â”‚ â”‚â”‚
â”‚ â”‚ ğŸ“º Sony XBR-55X900H      â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚ â”‚    192.168.5.11          â”‚  â”‚ [Test Power]                             â”‚â”‚
â”‚ â”‚    [Assigned âœ“]          â”‚  â”‚                                           â”‚â”‚
â”‚ â”‚                          â”‚  â”‚ Output 3: Booth TV                       â”‚â”‚
â”‚ â”‚ ğŸ“º Unknown Device        â”‚  â”‚ [Drop zone - drag TV here]               â”‚â”‚
â”‚ â”‚    192.168.5.10          â”‚  â”‚ [Test Power]                             â”‚â”‚
â”‚ â”‚    [Drag me â†’]           â”‚  â”‚                                           â”‚â”‚
â”‚ â”‚                          â”‚  â”‚ Output 4: Back Bar TV                    â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ [Drop zone - drag TV here]               â”‚â”‚
â”‚                               â”‚ [Test Power]                             â”‚â”‚
â”‚ Assigned: 1/4 outputs         â”‚                                           â”‚â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚ [Clear All]                                              [Save Assignments]â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Interactive Features:**
- Drag-and-drop interface (HTML5 Drag and Drop API)
- Visual feedback during drag (semi-transparent ghost image)
- Drop zones highlight on hover
- "Test Power" button for each assigned output
- Progress counter (X/Y outputs assigned)
- "Clear All" to reset assignments

**Drag States:**
- **Idle**: TV cards have "Drag me â†’" indicator
- **Dragging**: Source card becomes semi-transparent, cursor changes
- **Over drop zone**: Drop zone highlights with blue border
- **Dropped**: TV card appears in output slot, removed from source list
- **Assigned**: TV shows checkmark in source list

---

### 4.4 Test Power Control

**Wireframe Description (After Assignment):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Test TV Control                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Testing power control for Output 2: Pool Table TV          â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Test Status â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ 1. Switching matrix to Output 2...          âœ“       â”‚   â”‚
â”‚ â”‚    Route complete (Input 1 â†’ Output 2)              â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ 2. Sending power on command...               âœ“       â”‚   â”‚
â”‚ â”‚    Command sent via CEC (opcode 0x44)               â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ 3. Verifying TV powered on...                [...]  â”‚   â”‚
â”‚ â”‚    Polling TV status...                             â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ [Close]                                                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Test Sequence:**
1. Switch matrix to target output
2. Send CEC/IP power on command
3. Verify TV responds (poll for status)
4. Display results (success/failure with error details)

---

### 4.5 Assignment Complete

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TV Assignment Complete                                  [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ âœ“ Successfully assigned 4 TVs to matrix outputs            â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Final Configuration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Output 1 â†’ Samsung QN65Q80T (192.168.5.5)           â”‚   â”‚
â”‚ â”‚            Power test: âœ“ Passed                     â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Output 2 â†’ LG OLED55C1PUB (192.168.5.8)             â”‚   â”‚
â”‚ â”‚            Power test: âœ“ Passed                     â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Output 3 â†’ Sony XBR-55X900H (192.168.5.11)          â”‚   â”‚
â”‚ â”‚            Power test: âš  Skipped                    â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ Output 4 â†’ Unknown Device (192.168.5.10)            â”‚   â”‚
â”‚ â”‚            Power test: âœ— Failed (Manual config req) â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ Configuration saved to database. TVs are now ready for     â”‚
â”‚ remote control via the Sports Bar Controller interface.    â”‚
â”‚                                                             â”‚
â”‚ [Go to Device Config]                [Close]               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Error Handling

### 5.1 No TVs Found

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ No TVs Found                                            [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ âš  Discovery scan completed but no TVs were detected       â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Common Causes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ âœ“ TVs are not powered on                            â”‚   â”‚
â”‚ â”‚   â†’ Turn on TVs and try again                       â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ âœ“ IP range is incorrect                             â”‚   â”‚
â”‚ â”‚   â†’ Verify TVs are on the specified network         â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ âœ“ Network control is disabled on TVs                â”‚   â”‚
â”‚ â”‚   â†’ Enable "External Device Manager" (Samsung)      â”‚   â”‚
â”‚ â”‚   â†’ Enable "LG Connect Apps" (LG)                   â”‚   â”‚
â”‚ â”‚   â†’ Enable "IP Control" (Sony)                      â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ âœ“ Firewall blocking connections                     â”‚   â”‚
â”‚ â”‚   â†’ Check network firewall settings                 â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Next Steps â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [Scan Again]           Retry with same settings     â”‚   â”‚
â”‚ â”‚ [Change Settings]      Modify IP range/ports        â”‚   â”‚
â”‚ â”‚ [Manual Add]           Add TVs manually by IP       â”‚   â”‚
â”‚ â”‚ [Troubleshooting]      View detailed guide          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ [Close]                                                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.2 Pairing Timeout

**Error Message:**
```
Title: Pairing Timeout
Message: The TV did not respond within 60 seconds. Ensure the TV is powered on and someone is at the TV to accept the pairing request.
Actions: [Try Again] [Skip] [Help]
```

---

### 5.3 Pairing Rejected

**Error Message:**
```
Title: Pairing Rejected
Message: The pairing request was denied on the TV screen. Please restart pairing and press "Allow" or "Accept" when prompted on the TV.
Actions: [Retry Pairing] [Skip This TV] [Cancel]
```

---

### 5.4 Network Unreachable

**Error Message:**
```
Title: Network Error
Message: Unable to reach TV at 192.168.5.5. Check that:
â€¢ TV is powered on
â€¢ TV is connected to the network
â€¢ IP address is correct
â€¢ No firewall blocking connections

Actions: [Test Connection] [Change IP] [Skip] [Troubleshoot]
```

---

### 5.5 Unsupported TV Brand

**Wireframe Description:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Unsupported TV Detected                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ âš  TV at 192.168.5.15 does not support IP control          â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Device Information â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ IP Address:   192.168.5.15                          â”‚   â”‚
â”‚ â”‚ Port:         8001                                  â”‚   â”‚
â”‚ â”‚ Brand:        Unknown                               â”‚   â”‚
â”‚ â”‚ API Response: Connection refused                    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Alternative Control Methods â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ This TV may support control via:                    â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ â€¢ HDMI-CEC (Recommended)                            â”‚   â”‚
â”‚ â”‚   Use CEC discovery instead                         â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ â€¢ IR Blaster                                        â”‚   â”‚
â”‚ â”‚   Configure IR control in Device Config             â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ [Remove from List]  [Try CEC]  [Configure IR]  [Keep]     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.6 Invalid IP Range

**Inline Validation Error (Real-time):**
```
Start IP: [192.168.5.1]         âœ“ Valid
End IP:   [192.168.4.24]        âœ— End IP must be in same subnet as Start IP
          â””â”€ Error appears immediately when user leaves field
```

---

### 5.7 Assignment Conflict

**Error Message:**
```
Title: Duplicate Assignment
Message: Sony XBR-55X900H is already assigned to Output 2. A TV can only be assigned to one matrix output.

Current assignment:
â€¢ Output 2: Sony XBR-55X900H

Actions: [Remove from Output 2] [Cancel]
```

---

## 6. Database Schema Updates

### 6.1 New Table: NetworkTVDevices

```typescript
export const networkTVDevices = sqliteTable('NetworkTVDevice', {
  id: text('id').primaryKey().$defaultFn(() => crypto.randomUUID()),

  // Network info
  ipAddress: text('ipAddress').notNull().unique(),
  port: integer('port').notNull(),
  macAddress: text('macAddress'), // For Wake-on-LAN
  hostname: text('hostname'),

  // TV info
  brand: text('brand').notNull(), // Samsung, LG, Sony, etc.
  model: text('model'),
  displayName: text('displayName').notNull(), // User-friendly name
  firmwareVersion: text('firmwareVersion'),

  // Authentication
  authToken: text('authToken'), // Encrypted token
  authTokenExpiry: timestamp('authTokenExpiry'),
  pairingStatus: text('pairingStatus').notNull().default('unpaired'), // unpaired, paired, expired
  lastPairingAttempt: timestamp('lastPairingAttempt'),

  // Capabilities
  supportsPower: integer('supportsPower', { mode: 'boolean' }).notNull().default(false),
  supportsVolume: integer('supportsVolume', { mode: 'boolean' }).notNull().default(false),
  supportsInput: integer('supportsInput', { mode: 'boolean' }).notNull().default(false),
  supportsApps: integer('supportsApps', { mode: 'boolean' }).notNull().default(false),
  apiVersion: text('apiVersion'),

  // Matrix association
  matrixOutputId: text('matrixOutputId').references(() => matrixOutputs.id, { onDelete: 'set null' }),

  // Status
  status: text('status').notNull().default('offline'), // online, offline, error
  lastSeen: timestamp('lastSeen'),
  lastError: text('lastError'),

  // Discovery metadata
  discoveryMethod: text('discoveryMethod'), // ip_scan, cidr_scan, manual
  discoveryConfidence: text('discoveryConfidence'), // high, medium, low
  discoveredAt: timestamp('discoveredAt'),

  createdAt: timestamp('createdAt').notNull().default(timestampNow()),
  updatedAt: timestamp('updatedAt').notNull().default(timestampNow()),
})
```

### 6.2 MatrixOutput Schema Updates

```typescript
// Add to existing matrixOutputs table
{
  // ... existing fields ...

  // Network TV association (new)
  networkTVDeviceId: text('networkTVDeviceId').references(() => networkTVDevices.id, { onDelete: 'set null' }),

  // Keep existing CEC fields for backward compatibility
  tvBrand: text('tvBrand'),
  tvModel: text('tvModel'),
  cecAddress: text('cecAddress'),
  lastDiscovery: timestamp('lastDiscovery'),
}
```

---

## 7. API Endpoints

### 7.1 POST /api/tv-discovery/scan

Start a network scan for TVs.

**Request:**
```json
{
  "method": "ip_range" | "cidr" | "subnet",
  "config": {
    "startIP": "192.168.5.1",
    "endIP": "192.168.5.24",
    // OR
    "cidr": "192.168.5.0/24",

    "ports": [8001, 3000, 20060, 7345, 9080],
    "timeout": 2000,
    "concurrentScans": 5,
    "skipCEC": true,
    "testPower": false
  }
}
```

**Response:**
```json
{
  "success": true,
  "scanId": "scan-123",
  "estimatedDuration": 10000,
  "message": "Scan started"
}
```

---

### 7.2 GET /api/tv-discovery/scan/:scanId/status

Get real-time scan progress (used for polling during scan).

**Response:**
```json
{
  "success": true,
  "status": "scanning" | "complete" | "failed",
  "progress": {
    "current": 12,
    "total": 24,
    "percentage": 50,
    "currentIP": "192.168.5.12"
  },
  "discovered": [
    {
      "ipAddress": "192.168.5.5",
      "port": 8001,
      "brand": "Samsung",
      "model": "QN65Q80T",
      "confidence": "high",
      "pairingRequired": true,
      "capabilities": ["power", "volume", "input", "apps"]
    }
  ],
  "elapsed": 8000,
  "estimatedRemaining": 7000
}
```

---

### 7.3 POST /api/tv-discovery/pair

Initiate pairing with a specific TV.

**Request:**
```json
{
  "ipAddress": "192.168.5.5",
  "port": 8001,
  "brand": "Samsung"
}
```

**Response:**
```json
{
  "success": true,
  "pairingId": "pair-456",
  "message": "Pairing request sent to TV. Check TV screen for PIN.",
  "timeout": 60,
  "requiresPIN": true
}
```

---

### 7.4 POST /api/tv-discovery/pair/:pairingId/verify

Verify PIN and complete pairing.

**Request:**
```json
{
  "pin": "1234"
}
```

**Response:**
```json
{
  "success": true,
  "deviceId": "tv-789",
  "authToken": "ey...k7",
  "tokenExpiry": "2025-12-31T23:59:59Z",
  "capabilities": {
    "power": true,
    "volume": true,
    "input": true,
    "apps": true
  },
  "apiVersion": "2.0.25"
}
```

---

### 7.5 GET /api/tv-discovery/pair/:pairingId/status

Poll pairing status (for LG TVs that don't require PIN).

**Response:**
```json
{
  "success": true,
  "status": "waiting" | "accepted" | "rejected" | "timeout",
  "timeRemaining": 45,
  "authToken": "ey...k7" // Only present when status = "accepted"
}
```

---

### 7.6 POST /api/tv-discovery/assign

Assign discovered TVs to matrix outputs.

**Request:**
```json
{
  "assignments": [
    {
      "deviceId": "tv-789",
      "matrixOutputId": "output-1"
    },
    {
      "deviceId": "tv-790",
      "matrixOutputId": "output-2"
    }
  ],
  "testPower": true
}
```

**Response:**
```json
{
  "success": true,
  "results": [
    {
      "deviceId": "tv-789",
      "matrixOutputId": "output-1",
      "assigned": true,
      "powerTestResult": "passed"
    },
    {
      "deviceId": "tv-790",
      "matrixOutputId": "output-2",
      "assigned": true,
      "powerTestResult": "failed",
      "error": "TV did not respond to power command"
    }
  ]
}
```

---

### 7.7 POST /api/tv-discovery/auto-assign

Auto-assign TVs based on CEC names.

**Request:**
```json
{
  "matrixConfigId": "config-1",
  "testPower": false
}
```

**Response:**
```json
{
  "success": true,
  "suggestions": [
    {
      "matrixOutputId": "output-1",
      "cecName": "SAMSUNG-QN65Q80T",
      "suggestedDeviceId": "tv-789",
      "confidence": 95
    }
  ],
  "autoAssigned": 3,
  "manualRequired": 1
}
```

---

### 7.8 DELETE /api/tv-discovery/devices/:deviceId

Remove a discovered TV from the system.

**Response:**
```json
{
  "success": true,
  "message": "Device removed successfully"
}
```

---

## 8. Brand-Specific Pairing Details

### 8.1 Samsung Pairing Flow

**API Endpoint Pattern:**
```
1. POST http://{ip}:8001/api/v2/
   â†’ Initiates pairing, TV shows PIN
2. User enters PIN in UI
3. WebSocket connection with PIN in header
4. TV accepts/rejects
5. Store auth token from WebSocket handshake
```

**TV Screen Display:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Allow connection from:            â•‘
â•‘  Sports Bar Controller             â•‘
â•‘                                    â•‘
â•‘  PIN: 1234                         â•‘
â•‘                                    â•‘
â•‘  [Allow]  [Deny]                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

### 8.2 LG WebOS Pairing Flow

**API Endpoint Pattern:**
```
1. WebSocket connection to ws://{ip}:3000/
2. Send 'register' command with client info
3. TV shows Accept/Reject prompt (no PIN)
4. Poll for acceptance status
5. Store client key from response
```

**TV Screen Display:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Connection Request                â•‘
â•‘                                    â•‘
â•‘  Sports Bar Controller             â•‘
â•‘  wants to connect                  â•‘
â•‘                                    â•‘
â•‘  [Accept]  [Reject]                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

### 8.3 Sony BRAVIA Pairing Flow

**API Endpoint Pattern:**
```
1. POST http://{ip}/sony/accessControl
   â†’ Request access
2. Enter PSK (Pre-Shared Key) from TV settings
3. All future requests use PSK in headers
4. No on-screen prompt if PSK is configured
```

**UI Differences:**
- Instead of PIN, prompt for PSK from TV settings menu
- Guide user to: Settings â†’ Network â†’ IP Control â†’ PSK

---

### 8.4 Vizio SmartCast Pairing Flow

**API Endpoint Pattern:**
```
1. POST http://{ip}:7345/pairing/start
2. Enter 4-digit PIN from TV screen
3. POST http://{ip}:7345/pairing/pair with PIN
4. Store auth token from response
```

---

## 9. Component Hierarchy

```
TVDiscoveryWizard (Main Dialog)
â”œâ”€â”€ DiscoveryConfigStep
â”‚   â”œâ”€â”€ MethodSelector (IP Range | CIDR | Subnet)
â”‚   â”œâ”€â”€ IPRangeForm
â”‚   â”‚   â”œâ”€â”€ IPInput (Start)
â”‚   â”‚   â”œâ”€â”€ IPInput (End)
â”‚   â”‚   â”œâ”€â”€ PortCheckboxGroup
â”‚   â”‚   â””â”€â”€ AdvancedOptions
â”‚   â”œâ”€â”€ CIDRForm
â”‚   â””â”€â”€ SubnetAutoForm
â”‚
â”œâ”€â”€ DiscoveryScanStep
â”‚   â”œâ”€â”€ ScanProgress (Radix Progress)
â”‚   â”œâ”€â”€ CurrentIPDisplay
â”‚   â”œâ”€â”€ DetectedDevicesList
â”‚   â”‚   â””â”€â”€ DetectedDeviceCard (repeating)
â”‚   â”‚       â”œâ”€â”€ DeviceBadge
â”‚   â”‚       â”œâ”€â”€ BrandOverrideDropdown
â”‚   â”‚       â””â”€â”€ ActionButtons
â”‚   â””â”€â”€ ScanStats
â”‚
â”œâ”€â”€ PairingWorkflowStep
â”‚   â”œâ”€â”€ PairingOverview
â”‚   â”œâ”€â”€ TVPairingCard (repeating, sequential)
â”‚   â”‚   â”œâ”€â”€ BrandSpecificPairing
â”‚   â”‚   â”‚   â”œâ”€â”€ SamsungPairing (PIN entry)
â”‚   â”‚   â”‚   â”œâ”€â”€ LGPairing (Accept/Reject polling)
â”‚   â”‚   â”‚   â”œâ”€â”€ SonyPairing (PSK entry)
â”‚   â”‚   â”‚   â””â”€â”€ VIZIOPairing (PIN entry)
â”‚   â”‚   â”œâ”€â”€ PairingTimer
â”‚   â”‚   â””â”€â”€ TestControls
â”‚   â””â”€â”€ PairingResults
â”‚
â””â”€â”€ MatrixAssignmentStep
    â”œâ”€â”€ AssignmentMethodSelector
    â”œâ”€â”€ AutoAssignView
    â”‚   â”œâ”€â”€ MatchedOutputCard (repeating)
    â”‚   â”œâ”€â”€ ConfidenceScore
    â”‚   â””â”€â”€ ManualOverride
    â”œâ”€â”€ ManualAssignView
    â”‚   â”œâ”€â”€ DraggableTVList
    â”‚   â”‚   â””â”€â”€ DraggableTVCard (repeating)
    â”‚   â””â”€â”€ MatrixOutputDropZones
    â”‚       â””â”€â”€ OutputDropZone (repeating)
    â”‚           â””â”€â”€ DroppedTVCard
    â””â”€â”€ AssignmentResults
        â””â”€â”€ PowerTestResults
```

---

## 10. State Management

### 10.1 Discovery Wizard State Machine

```typescript
type WizardStep =
  | 'method_selection'
  | 'config_input'
  | 'scanning'
  | 'scan_results'
  | 'pairing_overview'
  | 'pairing_active'
  | 'pairing_complete'
  | 'assignment_method'
  | 'assignment_auto'
  | 'assignment_manual'
  | 'assignment_complete'

interface DiscoveryState {
  currentStep: WizardStep
  canGoBack: boolean
  canGoForward: boolean

  scanConfig: {
    method: 'ip_range' | 'cidr' | 'subnet'
    startIP?: string
    endIP?: string
    cidr?: string
    ports: number[]
    timeout: number
    concurrentScans: number
    skipCEC: boolean
    testPower: boolean
  }

  scanProgress: {
    scanId: string | null
    status: 'idle' | 'scanning' | 'complete' | 'failed'
    current: number
    total: number
    currentIP: string
    elapsed: number
    estimatedRemaining: number
  }

  discoveredDevices: DiscoveredTV[]
  selectedDevices: string[] // Device IDs selected for pairing

  pairingProgress: {
    current: number
    total: number
    activePairing: PairingSession | null
  }

  pairedDevices: PairedTV[]

  assignments: Map<string, string> // deviceId -> matrixOutputId
  autoAssignSuggestions: AssignmentSuggestion[]
}
```

---

## 11. Accessibility Considerations

### 11.1 Keyboard Navigation

- All steps navigable via Tab/Shift+Tab
- Enter key submits forms
- Escape key closes dialogs
- Arrow keys for radio button groups
- Space bar for checkboxes

### 11.2 Screen Reader Support

- ARIA labels on all form inputs
- ARIA live regions for scan progress updates
- ARIA alerts for errors
- Semantic HTML (proper heading hierarchy)
- Focus management during step transitions

### 11.3 Visual Accessibility

- Minimum 4.5:1 contrast ratio for text
- Color not sole indicator (use icons + color)
- Focus indicators on all interactive elements
- Large touch targets (minimum 44x44px)

---

## 12. Error Message Reference

### Complete Error Message Library

```typescript
const ERROR_MESSAGES = {
  // Validation errors
  'INVALID_IP': 'Invalid IP address format. Use format: 192.168.1.100',
  'INVALID_IP_RANGE': 'End IP must be greater than or equal to Start IP',
  'DIFFERENT_SUBNETS': 'Warning: IPs are in different subnets. This may take longer.',
  'NO_PORTS_SELECTED': 'Please select at least one port to scan',
  'INVALID_CIDR': 'Invalid CIDR notation. Use format: 192.168.1.0/24',
  'SUBNET_TOO_LARGE': 'Subnet too large. Maximum /16 (65,536 IPs).',
  'TIMEOUT_OUT_OF_RANGE': 'Timeout must be between 1 and 10 seconds',

  // Discovery errors
  'NO_TVS_FOUND': 'No TVs detected. Verify TVs are powered on and network control is enabled.',
  'SCAN_TIMEOUT': 'Scan timed out. Try reducing the IP range or increasing timeout.',
  'NETWORK_ERROR': 'Unable to reach network. Check server network connection.',

  // Pairing errors
  'PAIRING_TIMEOUT': 'TV did not respond within 60 seconds. Ensure TV is powered on and someone is at the TV.',
  'PAIRING_REJECTED': 'Pairing request was denied on the TV screen. Try again and press Allow/Accept.',
  'INVALID_PIN': 'Invalid PIN format. Please enter the 4-digit PIN shown on the TV.',
  'PIN_MISMATCH': 'PIN verification failed. Check the PIN on the TV screen and try again.',
  'AUTH_TOKEN_EXPIRED': 'Authentication token expired. Re-pair this TV to continue.',
  'PAIRING_FAILED': 'Pairing failed. Check TV network settings and try again.',

  // Connection errors
  'TV_UNREACHABLE': 'Unable to reach TV at {ip}. Verify TV is powered on and connected to network.',
  'CONNECTION_REFUSED': 'TV refused connection. Enable network control in TV settings.',
  'UNSUPPORTED_TV': 'This TV does not support IP control. Use CEC or IR control instead.',
  'API_VERSION_MISMATCH': 'TV API version not supported. Contact support.',

  // Assignment errors
  'DUPLICATE_ASSIGNMENT': '{tvModel} is already assigned to Output {outputNum}. Remove existing assignment first.',
  'OUTPUT_ALREADY_ASSIGNED': 'Output {outputNum} already has a TV assigned. Remove existing assignment first.',
  'MATRIX_OUTPUT_NOT_FOUND': 'Matrix output not found. Refresh and try again.',
  'POWER_TEST_FAILED': 'Power test failed for {tvModel}. Verify TV is connected to matrix output {outputNum}.',

  // Database errors
  'DB_SAVE_FAILED': 'Failed to save configuration. Please try again.',
  'DB_UPDATE_FAILED': 'Failed to update device. Please try again.',

  // General errors
  'UNKNOWN_ERROR': 'An unexpected error occurred. Check logs for details.',
  'RATE_LIMIT': 'Too many requests. Please wait before trying again.',
}
```

---

## 13. Performance Considerations

### 13.1 Scan Optimization

- **Concurrent scanning**: Default 5 IPs at once (configurable 1-20)
- **Early termination**: Stop scanning port if first port responds
- **Connection pooling**: Reuse HTTP connections where possible
- **Timeout handling**: Aggressive timeouts (default 2s) to prevent slow scans

### 13.2 UI Responsiveness

- **Debounced validation**: IP input validation debounced by 300ms
- **Virtual scrolling**: For large device lists (>50 items)
- **Progress updates**: Throttled to max 10 updates/second
- **Lazy loading**: Device images loaded on-demand

### 13.3 Database Efficiency

- **Batch inserts**: Save multiple devices in single transaction
- **Indexed queries**: Index on ipAddress, matrixOutputId
- **Connection pooling**: Reuse database connections

---

## 14. Testing Scenarios

### 14.1 Happy Path Tests

1. **IP Range Discovery**
   - Enter valid IP range (192.168.5.1-24)
   - Scan completes successfully
   - 3 TVs detected (Samsung, LG, Sony)
   - All TVs paired successfully
   - Auto-assign matches all outputs
   - Power tests pass
   - Configuration saved

2. **CIDR Discovery**
   - Enter valid CIDR (192.168.5.0/24)
   - Scan finds 2 TVs
   - Manual pairing for both
   - Drag-and-drop assignment
   - Save without power tests

### 14.2 Edge Case Tests

1. **No TVs Found**
   - Scan completes with 0 devices
   - Error message displayed
   - Options to retry/change settings

2. **Pairing Timeout**
   - Samsung pairing request sent
   - User waits >60 seconds
   - Timeout error displayed
   - Retry option available

3. **Partial Pairing**
   - 3 TVs detected
   - 2 pair successfully
   - 1 pairing fails
   - Workflow continues with 2 paired TVs

4. **Duplicate IP Detection**
   - Same IP appears twice (edge case)
   - System detects duplicate
   - Shows warning to user

5. **Matrix Output Mismatch**
   - Auto-assign suggests wrong TV
   - User manually overrides
   - Correct assignment saved

---

## 15. Future Enhancements

### 15.1 Phase 2 Features

- **Bulk operations**: Pair all detected TVs automatically
- **Scheduled discovery**: Auto-run discovery daily/weekly
- **Wake-on-LAN**: Wake TVs before scanning
- **Device templates**: Save scan configs as templates
- **Import/export**: Export discovery results as JSON

### 15.2 Advanced Features

- **mDNS/Bonjour discovery**: Auto-detect TVs via mDNS
- **SNMP integration**: Query TV status via SNMP
- **TV firmware updates**: Check for and apply TV firmware updates
- **Health monitoring**: Continuous TV status monitoring
- **Automated troubleshooting**: AI-powered issue detection

---

## 16. Documentation Links

### User Documentation

- **Getting Started Guide**: /docs/TV_DISCOVERY_GETTING_STARTED.md
- **Troubleshooting**: /docs/TV_DISCOVERY_TROUBLESHOOTING.md
- **Brand-Specific Guides**:
  - Samsung: /docs/SAMSUNG_TV_SETUP.md
  - LG: /docs/LG_WEBOS_SETUP.md
  - Sony: /docs/SONY_BRAVIA_SETUP.md

### Developer Documentation

- **API Reference**: /docs/TV_DISCOVERY_API.md
- **Component Library**: /docs/TV_DISCOVERY_COMPONENTS.md
- **State Management**: /docs/TV_DISCOVERY_STATE.md

---

## Appendix A: Wireframe Color Scheme

```
Primary Colors:
- Blue-600: #2563eb (Primary actions, progress bars)
- Green-600: #16a34a (Success states, checkmarks)
- Yellow-500: #eab308 (Warnings, needs attention)
- Red-600: #dc2626 (Errors, failures)
- Gray-700: #374151 (Text)
- Gray-200: #e5e7eb (Borders, dividers)

Background Colors:
- White: #ffffff (Dialogs, cards)
- Gray-50: #f9fafb (Input backgrounds)
- Gray-900: #111827 (Dark mode - future)

Interactive States:
- Hover: Lighten primary by 10%
- Active: Darken primary by 10%
- Disabled: opacity 50%
```

---

## Appendix B: Responsive Breakpoints

```
Mobile: < 640px
  - Single column layout
  - Stack all panels vertically
  - Full-width buttons

Tablet: 640px - 1024px
  - Two column layout for assignment step
  - Condensed device cards
  - Medium-width dialogs

Desktop: > 1024px
  - Full width dialogs (max 1200px)
  - Side-by-side panels
  - Larger touch targets
```

---

## Appendix C: Sample User Journey

**Scenario**: Bar owner wants to set up 8 new Samsung TVs

1. **Start**: Clicks "Discover Network TVs" in Device Config
2. **Method**: Selects "IP Range" option
3. **Config**: Enters 192.168.5.1 - 192.168.5.8, keeps default ports
4. **Scan**: Watches progress bar, sees 8 TVs detected in 15 seconds
5. **Review**: Sees all 8 Samsung TVs with "Needs Pairing" status
6. **Bulk Action**: Clicks "Select All" and "Continue to Pairing"
7. **Pairing 1**: Walks to TV 1, sees PIN "1234", enters PIN, paired
8. **Pairing 2-8**: Repeats for remaining 7 TVs (5 minutes total)
9. **Assignment**: Selects "Auto-assign by CEC name"
10. **Verify**: Reviews suggested assignments, all match correctly
11. **Test**: Runs power test on all 8 outputs, all pass
12. **Complete**: Saves configuration, returns to Device Config page
13. **Result**: 8 TVs ready for remote control via bartender remote

**Total time**: ~10 minutes for 8 TVs

---

**End of Specification**
